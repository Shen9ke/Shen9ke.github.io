require=function e(t,n,i){function c(s,r){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return c(n||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)c(i[s]);return c}({ButtonBase:[function(e,t,n){"use strict";cc._RF.push(t,"3064fsf+upAGbZ+13tT5JDE","ButtonBase"),cc.Class({extends:cc.Component,properties:{FunctionTemp:{default:[],type:cc.Component.EventHandler}},onLoad:function(){var e=0;this.node.on(cc.Node.EventType.TOUCH_START,function(t){var n=new cc.scaleTo(.1,1.14);this.node.runAction(n),this.TouchEvent=function(e){cc.Component.EventHandler.emitEvents(this.FunctionTemp,e)},this.TouchEvent(0),this.LongThouch=function(){5==++e&&(this.TouchEvent(.1),e=0)},this.scheduleOnce(function(){this.schedule(this.LongThouch,.02)},.2)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){var t=new cc.scaleTo(.1,1.24);this.node.runAction(t),this.unscheduleAllCallbacks()},this)}}),cc._RF.pop()},{}],ColliderListener:[function(e,t,n){"use strict";cc._RF.push(t,"7584arRfqRKSZO6x0zLwhux","ColliderListener"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,this.touchingNumber=0},onCollisionEnter:function(e){this.node.color=cc.Color.RED,this.touchingNumber++,cc.log(this.touchingNumber)},onCollisionStay:function(e){},onCollisionExit:function(){this.touchingNumber--,cc.log(this.touchingNumber),0===this.touchingNumber&&(this.node.color=cc.Color.WHITE)}}),cc._RF.pop()},{}],base:[function(e,t,n){"use strict";cc._RF.push(t,"7ecadvqx7BLp46WCgL4iFbB","base"),cc.Class({extends:cc.Component,properties:{Xfactor:62.8,Yfactor:62.8,target:{default:null,type:cc.Prefab}},Base:function(e,t,n){var i=cc.instantiate(this.target);i.parent=cc.find(n),i.scaleX=.72,i.scaleY=.72,i.setPosition(e,t)},ShapsRender:function(e,t,n,i,c){for(var o=0;o<=3;o++){s=0;for(var s=0;s<=3;s++)if(1==i[n][o][s]){var r=(1e3*this.Xfactor*s+31400+1e3*e)/1e3,a=(-(1e3*this.Yfactor*o+31400)+1e3*t)/1e3;this.Base(r,a,c)}}},ctor:function(){this.LShape=[[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,0,1,0],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[1,1,1,0],[0,0,0,0]]],this.JShape=[[[0,0,1,0],[0,0,1,0],[0,1,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[1,1,1,0],[0,0,1,0],[0,0,0,0],[0,0,0,0]]],this.IShape=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]],this.OShape=[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]],this.TShape=[[[0,0,0,0],[0,1,0,0],[1,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,0,0],[0,1,1,0],[0,1,0,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,0],[0,1,0,0]],[[0,0,0,0],[0,1,0,0],[1,1,0,0],[0,1,0,0]]],this.SShape=[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]],this.ZShape=[[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]]}}),cc._RF.pop()},{}],buttoncontrol:[function(e,t,n){"use strict";cc._RF.push(t,"0cab9EYqEBEEb5cBrYXmSiT","buttoncontrol"),cc.Class({extends:cc.Component,properties:{},test:function(){}}),cc._RF.pop()},{}],game:[function(e,t,n){"use strict";cc._RF.push(t,"2b823RO6lZD66MGSoOnad9x","game");var i=e("base");cc.Class({extends:i,properties:{ox:283,oy:-31,GameState:0,styles:0,stylesT:0,Direction:0,DirectionTemp:0,GameScore:0,GameLevel:0,DropSpeed:.7,GameScoreLabel:{default:null,type:cc.Label},GameLevelLabel:{default:null,type:cc.Label}},InitGame:function(){this.styles=Math.ceil(6*Math.random()),this.Direction=Math.ceil(3*Math.random()),this.DirectionTemp=this.Direction,this.stylesT=this.styles,this.ShapsRender(this.ox=188.4,this.oy=62.8,this.DirectionTemp,this.RandomTag(this.styles),"Canvas/Game_Canvas"),cc.log("ox,oy",this.ox,this.oy),this.GameState=1,this.stylesT=Math.ceil(6*Math.random()),this.CreatPreview(),this.AutoDrop()},Repeat:function(){this.ShapsRender(this.ox=188.4,this.oy=251.2,this.DirectionTemp,this.RandomTag(this.stylesT),"Canvas/Game_Canvas"),this.styles=this.stylesT,this.GameState=1,this.stylesT=Math.ceil(7*Math.random())-1,this.Direction=Math.ceil(4*Math.random())-1,this.DirectionTemp=this.Direction,this.CreatPreview(),this.C_GameOver(),this.AutoDrop()},SatartGame:function(){0===this.GameState?this.InitGame():!1===cc.game.isPaused()?cc.game.pause():cc.game.resume()},Restart:function(){cc.game.restart()},EndGame:function(){cc.game.end()},C_GameOver:function(){cc.find("Canvas/GameTipsCanvas");var e=this.node.children.length-1,t=0;for(e;e>=0;e--)this.node.children[e].y+93>0&&++t>5&&(this.Restart(),t=0);t=0},CreatPreview:function(){this.CleanPreview();this.ShapsRender(0,0,this.Direction,this.RandomTag(this.stylesT),"Canvas/GameTipsCanvas")},RandomTag:function(e){switch(e){case 0:return this.LShape.concat();case 1:return this.TShape.concat();case 2:return this.OShape.concat();case 3:return this.SShape.concat();case 4:return this.ZShape.concat();case 5:return this.IShape.concat();case 6:return this.JShape.concat()}},CleanPreview:function(){cc.find("Canvas/GameTipsCanvas"),cc.find("Canvas/GameTipsCanvas").destroyAllChildren()},CleanLine:function(){var e=-1224.6,t=0,n=1;for(this.node=cc.find("Canvas/Game_Canvas"),e;e<0;e+=62.8,n++){for(var i=0;i<this.node.children.length&&t<=10;i++){var c=this.node.children[i].y;if(Math.abs(c-e)<5&&t++,10==t){for(var o=this.node.children.length-1;o>=0;o--)cc.log("yyid1",o),Math.abs(this.node.children[o].y-e)<5&&this.node.children[o].destroy();this.GameScore=this.GameScore+10,this.GameScoreLabel.string=this.GameScore,this.DropLine(e)}}cc.log("第"+n+"行","个数："+t),t=0}},DropLine:function(e){for(var t=0;t<this.node.children.length;t++)if(this.node.children[t].y>e+60){var n=cc.moveBy(.5,0,-62.8);this.node.children[t].runAction(n.clone())}},L_CheckBoundary:function(){var e=this.GetNodeArray(),t=0;for(t;t<4;t++,e++)if(this.node.children[e].x-62.9<0)return!1;return!0},R_CheckBoundary:function(){var e=this.GetNodeArray(),t=0;for(t;t<4;t++,e++)if(this.node.children[e].x+62.9>610)return!1;return!0},D_CheckBoundary:function(){var e=this.GetNodeArray(),t=0;for(t;t<4;t++,e++)if(this.node.children[e].y-62.8<-1224.6)return!1;return!0},T_CheckBoundary:function(){if(1==this.T_Check()){var e=this.GetNodeArray(),t=0;for(t;t<4;t++,e++)if(this.node.children[e].y-62.8<-1224.6)return!1;return!0}},T_Check:function(){for(var e=[[0,-62.8,0],[0,-62.8,2],[1,-62.8,1],[1,502.4,3],[3,-62.8,1],[4,-62.8,1],[4,-62.8,3],[5,-62.8,1],[5,439.6,1],[5,-62.8,3],[5,439.6,3],[6,439.6,0],[6,-62.8,2]],t=0;t<7;t++)if(this.styles==e[t][0]&&Math.abs(this.ox-e[t][1])<1&&this.Direction==e[t][2])return!1;return!0},R_Check:function(){var e=0,t=0,n=0,i=this.GetNodeArray();for(n=i-1,i;e<4;e++,i++)for(t=n;t>=0;t--)if(Math.abs(this.node.children[t].y-this.node.children[i].y)<60&&Math.abs(this.node.children[t].x-(this.node.children[i].x+62.8))<60)return!1;return!0},L_Check:function(){var e=0,t=0,n=0,i=this.GetNodeArray();for(n=i-1,i;e<4;e++,i++)for(t=n;t>=0;t--)if(Math.abs(this.node.children[t].y-this.node.children[i].y)<60&&Math.abs(this.node.children[t].x-(this.node.children[i].x-62.8))<60)return!1;return!0},DW_Check:function(){var e=0,t=0,n=0,i=this.GetNodeArray();for(n=i-1,i;e<4;e++,i++)for(t=n;t>=0;t--)if(Math.abs(this.node.children[t].x-this.node.children[i].x)<60&&Math.abs(this.node.children[t].y-(this.node.children[i].y-62.8))<60)return!1;return!0},GetNodeArray:function(){return this.node=cc.find("Canvas/Game_Canvas"),this.node.children.concat().length-4},MoveRight:function(e){if(1==this.R_CheckBoundary()&&1==this.R_Check()){this.node=cc.find("Canvas/Game_Canvas");var t,n=this.node,i=this.GetNodeArray();t=cc.moveBy(e,62.8,0),n.children[i].runAction(t.clone()),n.children[i+1].runAction(t.clone()),n.children[i+2].runAction(t.clone()),n.children[i+3].runAction(t.clone()),this.ox=(1e3*this.ox+62800)/1e3}},MoveLeft:function(e){if(1==this.L_CheckBoundary()&&1==this.L_Check()){this.node=cc.find("Canvas/Game_Canvas");var t,n=this.node,i=this.GetNodeArray();t=cc.moveBy(e,-62.8,0),n.children[i].runAction(t.clone()),n.children[i+1].runAction(t.clone()),n.children[i+2].runAction(t.clone()),n.children[i+3].runAction(t.clone()),this.ox=(1e3*this.ox-62800)/1e3}},MoveUp:function(){},Drop:function(){if(this.D_CheckBoundary()&&this.DW_Check()){this.node=cc.find("Canvas/Game_Canvas");var e,t=this.node,n=this.GetNodeArray();this.DropSpeed;e=cc.moveBy(this.DropSpeed,0,-62.8),t.children[n].runAction(e.clone()),t.children[n+1].runAction(e.clone()),t.children[n+2].runAction(e.clone()),t.children[n+3].runAction(e.clone()),this.oy=(1e3*this.oy-62800)/1e3}},AutoDrop:function(){this.callback=function(){this.D_CheckBoundary()&&this.DW_Check()?this.Drop():this.scheduleOnce(function(){this.D_CheckBoundary()&&this.DW_Check()||(this.unschedule(this.callback),this.CleanLine(),this.Repeat())},1)},this.schedule(this.callback,this.DropSpeed)},ActionBT:function(){if(1==this.T_CheckBoundary()){this.node=cc.find("Canvas/Game_Canvas");for(var e=this.GetNodeArray(),t=1;t<5;e++,t++)this.node.children[e].destroy();4==++this.Direction&&(this.Direction=0),this.Direction<4&&(cc.log("Direction=",this.Direction),this.ShapsRender(this.ox,this.oy,this.Direction,this.RandomTag(this.styles),"Canvas/Game_Canvas"))}}}),cc._RF.pop()},{base:"base"}],maingame:[function(e,t,n){"use strict";cc._RF.push(t,"d438bi8LSxAYIWD0t75blJN","maingame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],menu:[function(e,t,n){"use strict";cc._RF.push(t,"dafeekBMPJL6Jy9G+Gwf/PA","menu"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}]},{},["ButtonBase","ColliderListener","base","buttoncontrol","game","maingame","menu"]);